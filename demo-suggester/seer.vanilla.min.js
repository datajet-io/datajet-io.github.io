var autoComplete=function(){return function(b){function k(a,c){return a.classList?a.classList.contains(c):(new RegExp("\\b"+c+"\\b")).test(a.className)}function f(a,c,g){a.attachEvent?a.attachEvent("on"+c,g):a.addEventListener(c,g)}function h(a,c,g){a.detachEvent?a.detachEvent("on"+c,g):a.removeEventListener(c,g)}function n(a,c,g,b){f(b||document,c,function(c){for(var b,e=c.target||c.srcElement;e&&!(b=k(e,a));)e=e.parentElement;b&&g.call(e,c)})}if(document.querySelector){var e={selector:0,source:0,
minChars:3,delay:150,offsetLeft:0,offsetTop:1,cache:1,menuClass:"",renderItem:function(a,c){c=c.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&");var g=new RegExp("("+c.split(" ").join("|")+")","gi");return'<div class="dj-autocomplete-suggestion" data-val="'+a+'">'+a.replace(g,"<b>$1</b>")+"</div>"},onSelect:function(a,c,g){}},l;for(l in b)b.hasOwnProperty(l)&&(e[l]=b[l]);var m="object"==typeof e.selector?[e.selector]:document.querySelectorAll(e.selector);for(b=0;b<m.length;b++){var a=m[b];a.sc=document.createElement("div");
a.sc.className="dj-autocomplete-suggestions "+e.menuClass;a.autocompleteAttr=a.getAttribute("autocomplete");a.setAttribute("autocomplete","off");a.cache={};a.last_val="";a.updateSC=function(d,c){var g=a.getBoundingClientRect();a.sc.style.left=Math.round(g.left+(window.pageXOffset||document.documentElement.scrollLeft)+e.offsetLeft)+"px";a.sc.style.top=Math.round(g.bottom+(window.pageYOffset||document.documentElement.scrollTop)+e.offsetTop-1)+"px";a.sc.style.width=Math.round(g.right-g.left)+"px";if(!d&&
(a.sc.style.display="block",a.sc.maxHeight||(a.sc.maxHeight=parseInt((window.getComputedStyle?getComputedStyle(a.sc,null):a.sc.currentStyle).maxHeight)),a.sc.suggestionHeight||(a.sc.suggestionHeight=a.sc.querySelector(".dj-autocomplete-suggestion").offsetHeight),a.sc.suggestionHeight))if(c){var g=a.sc.scrollTop,b=c.getBoundingClientRect().top-a.sc.getBoundingClientRect().top;0<b+a.sc.suggestionHeight-a.sc.maxHeight?a.sc.scrollTop=b+a.sc.suggestionHeight+g-a.sc.maxHeight:0>b&&(a.sc.scrollTop=b+g)}else a.sc.scrollTop=
0};f(window,"resize",a.updateSC);document.body.appendChild(a.sc);n("autocomplete-suggestion","mouseleave",function(d){var c=a.sc.querySelector(".dj-autocomplete-suggestion.selected");c&&setTimeout(function(){c.className=c.className.replace("selected","")},20)},a.sc);n("autocomplete-suggestion","mouseover",function(d){if(d=a.sc.querySelector(".dj-autocomplete-suggestion.selected"))d.className=d.className.replace("selected","");this.className+=" selected"},a.sc);n("autocomplete-suggestion","mousedown",
function(d){if(k(this,"dj-autocomplete-suggestion")){var c=this.getAttribute("data-val");a.value=c;e.onSelect(d,c,this);a.sc.style.display="none"}},a.sc);a.blurHandler=function(){try{var d=document.querySelector(".dj-autocomplete-suggestions:hover")}catch(c){d=0}d?a!==document.activeElement&&setTimeout(function(){a.focus()},20):(a.last_val=a.value,a.sc.style.display="none",setTimeout(function(){a.sc.style.display="none"},350))};f(a,"blur",a.blurHandler);var p=function(d){var c=a.value;a.cache[c]=
d;if(d.length&&c.length>=e.minChars){for(var b="",f=0;f<d.length;f++)b+=e.renderItem(d[f],c);a.sc.innerHTML=b;a.updateSC(0)}else a.sc.style.display="none"};a.keydownHandler=function(d){var c=window.event?d.keyCode:d.which;if((40==c||38==c)&&a.sc.innerHTML){var b=a.sc.querySelector(".dj-autocomplete-suggestion.selected");b?(d=40==c?b.nextSibling:b.previousSibling)?("DIV"==d.tagName&&(d=40==c?b.nextSibling.nextSibling:b.previousSibling.previousSibling),b.className=b.className.replace("selected",""),
d&&"DIV"!==d.tagName&&(d.className+=" selected",a.value=d.getAttribute("data-val"))):(b.className=b.className.replace("selected",""),a.value=a.last_val,d=0):(d=40==c?a.sc.querySelector(".dj-autocomplete-suggestion"):a.sc.childNodes[a.sc.childNodes.length-1],d.className+=" selected",a.value=d.getAttribute("data-val"));a.updateSC(0,d);return!1}27==c?(a.value=a.last_val,a.sc.style.display="none"):(13==c||9==c)&&(b=a.sc.querySelector(".dj-autocomplete-suggestion.selected"))&&"none"!=a.sc.style.display&&
(e.onSelect(d,b.getAttribute("data-val"),b),setTimeout(function(){a.sc.style.display="none"},20))};f(a,"keydown",a.keydownHandler);a.keyupHandler=function(b){b=window.event?b.keyCode:b.which;if(!b||(35>b||40<b)&&13!=b&&27!=b){var c=a.value;if(c.length>=e.minChars){if(c!=a.last_val){a.last_val=c;clearTimeout(a.timer);if(e.cache){if(c in a.cache){p(a.cache[c]);return}for(b=1;b<c.length-e.minChars;b++){var f=c.slice(0,c.length-b);if(f in a.cache&&!a.cache[f].length){p([]);return}}}a.timer=setTimeout(function(){e.source(c,
p)},e.delay)}}else a.last_val=c,a.sc.style.display="none"}};f(a,"keyup",a.keyupHandler);a.focusHandler=function(b){a.last_val="\n";a.keyupHandler(b)};e.minChars||f(a,"focus",a.focusHandler)}this.destroy=function(){for(var a=0;a<m.length;a++){var b=m[a];h(window,"resize",b.updateSC);h(b,"blur",b.blurHandler);h(b,"focus",b.focusHandler);h(b,"keydown",b.keydownHandler);h(b,"keyup",b.keyupHandler);b.autocompleteAttr?b.setAttribute("autocomplete",b.autocompleteAttr):b.removeAttribute("autocomplete");document.body.removeChild(b.sc)}}}}}();
(function(){"function"===typeof define&&define.amd?define("autoComplete",function(){return autoComplete}):"undefined"!==typeof module&&module.exports?module.exports=autoComplete:window.autoComplete=autoComplete})();window.readyHandlers=[];window.ready=function(b){window.readyHandlers.push(b);handleState()};window.handleState=function(){if(-1<["interactive","complete"].indexOf(document.readyState))for(;0<window.readyHandlers.length;)window.readyHandlers.shift()()};document.onreadystatechange=window.handleState;
ready(function(){new autoComplete({selector:"#suggestions",minChars:2,renderItem:function(b){var k="",f=b.br?b.br+" ":"";0==b.ty?f=b.br?b.br+" in "+b.ti:b.ti+" in "+b.ca:780<(window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth)?(k=" product",f=(b.th?'<img class="dj-item-img" src="'+imgUrl+"/m_"+b.th+'">':"")+'<span class="dj-item-product"><strong class="dj-item-brand">'+f+'</strong><span class="dj-item-title">'+b.ti+'</span><strong class="dj-item-price">R$ '+b.cp+"</strong></span>"):
f=b.ti;f='<a class="dj-autocomplete-suggestion'+k+'" data-link="'+b.li+'" href="'+b.li+'">'+f+"</a>";b.ct&&(f='<div class="dj-autocomplete-category">'+b.ct+"</div>"+f);return f},onSelect:function(b,k,f){window.location.href="//"+f.getAttribute("data-link")},source:function(b,k){var f=[],h=[];suggester.get(b,function(b){for(var e=0;e<b.length;e++)switch(b[e].ty){case 0:0==f.length&&(b[e].ct="Search Results");5>f.length&&f.push(b[e]);break;case 1:0==h.length&&(b[e].ct="Related Products"),4>h.length&&
h.push(b[e])}k(f.concat(h))})}})});