var escapeRegEx=function(){return{escapeRegExChars:function(a){return a.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},isNumber:function(a){return"number"===typeof a},isUndefined:function(a){return"undefined"===typeof a},noop:function(){}}}();var PersistentStorage=function(){function a(a){this.prefix=["__",a,"__"].join("");this.ttlKey="__ttl__";this.keyMatcher=new RegExp("^"+escapeRegEx.escapeRegExChars(this.prefix))}function d(a){return JSON.stringify(escapeRegEx.isUndefined(a)?null:a)}var c;try{c=window.localStorage,c.setItem("~~~","!"),c.removeItem("~~~")}catch(f){c=null}c&&window.JSON?(a.prototype._prefix=function(a){return this.prefix+a},a.prototype._ttlKey=function(a){return this._prefix(a)+this.ttlKey},a.prototype.get=function(a){this.isExpired(a)&&
this.remove(a);a=c.getItem(this._prefix(a));return JSON.parse(a)},a.prototype.set=function(a,g,e){escapeRegEx.isNumber(e)?c.setItem(this._ttlKey(a),d((new Date).getTime()+e)):c.removeItem(this._ttlKey(a));return c.setItem(this._prefix(a),d(g))},a.prototype.remove=function(a){c.removeItem(this._ttlKey(a));c.removeItem(this._prefix(a));return this},a.prototype.clear=function(){var a,d,e=[],h=c.length;for(a=0;a<h;a++)(d=c.key(a)).match(this.keyMatcher)&&e.push(d.replace(this.keyMatcher,""));for(a=e.length;a--;)this.remove(e[a]);
    return this},a.prototype.isExpired=function(a){a=c.getItem(this._ttlKey(a));a=JSON.parse(a);return escapeRegEx.isNumber(a)&&(new Date).getTime()>a?!0:!1}):(a.prototype.get=escapeRegEx.noop,a.prototype.set=escapeRegEx.noop,a.prototype.remove=escapeRegEx.noop,a.prototype.clear=escapeRegEx.noop,a.prototype.isExpired=escapeRegEx.noop);return a}();var Datajet=Datajet||{};Datajet._hostOverride=null;Datajet._suggestUrl="/1.1/suggest/%QUERY";Datajet._prefetchUrl="/1.1/prefetch/";Datajet._queryLimit=50;Datajet._getUrl=function(a,d,c){return"http://$host$ep?key=".replace("$host",a).replace("$ep",d)+c+"&size="+Datajet._queryLimit};Datajet.euw=function(a){return new Datajet.Seer("euw",a)};Datajet.usw=function(a){return new Datajet.Seer("usw",a)};Datajet.apse=function(a){return new Datajet.Seer("apse",a)};
Datajet.sae=function(a){return new Datajet.Seer("sae",a)};Datajet.Seer=function(a,d){var c="seer$region$datajet.io".replace("$region$",""!==a?"."+a+".":"."),c=null==Datajet._hostOverride?c:Datajet._hostOverride;this.seerUrl=Datajet._getUrl(c,Datajet._suggestUrl,d);this.prefetchUrl=Datajet._getUrl(c,Datajet._prefetchUrl,d);this.ttl=6E5;this._requestor=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");this.storage=new PersistentStorage(this.prefetchUrl);this.initialize()};
Datajet.Seer.prototype.initialize=function(){var a=this.storage,d=this.ttl;this._ajax(this.prefetchUrl,function(c){if(null!=c)for(var f in c)a.set(f,c[f],d)})};Datajet.Seer.prototype.ajaxError=function(a){console.log("Datajet ERROR XMLHttpRequest status: "+a.status)};
Datajet.Seer.prototype._ajax=function(a,d){var c=this;this._requestor.onreadystatechange=function(){4==c._requestor.readyState&&(200==c._requestor.status?d(JSON.parse(c._requestor.responseText)):c.ajaxError(c._requestor))};this._requestor.open("GET",a,!0);this._requestor.withCredentials=!0;this._requestor.send()};
Datajet.Seer.prototype.get=function(a,d){if(""==a)d([]);else{var c=this.storage,f=this.ttl,g=this.storage.get(a);null!=g?d(g):this._ajax(this.seerUrl.replace("%QUERY",a),function(e){null===e&&(e=[]);c.set(a,e,f);d(e)})}};var css=".dj-autocomplete-suggestions{position:absolute;font-family:Arial,Helvetica,sans-serif;overflow:hidden;font-size:12px;background-color:#fff}@media (max-width:780px){.dj-autocomplete-suggestions{width:100%!important;left:0!important;font-size:16px!important;line-height:21px!important}}.dj-autocomplete-suggestion{padding:6px 10px 4px;display:block;color:#000;text-decoration:none}.dj-autocomplete-suggestion.selected,.dj-autocomplete-suggestion:hover{background-color:#f5f5f5}.dj-autocomplete-suggestion.product{width:25%;float:left;text-align:center;padding:0 4px;box-sizing:border-box;height:170px}.dj-autocomplete-category{display:block;background:#ececec;padding:6px 10px 4px;text-transform:uppercase;font-weight:700}.dj-item-img{max-width:80px;margin:5px 0}.dj-item-brand,.dj-item-price{display:block}.dj-item-title{display:block;height:27px;overflow:hidden}.dj-sep{color:gray}",
    head=document.getElementsByTagName("head")[0];head.innerHTML=head.innerHTML+"<style>"+css+"</style>";
var autoComplete=function(){return function(a){function d(a,b){return a.classList?a.classList.contains(b):(new RegExp("\\b"+b+"\\b")).test(a.className)}function c(a,b,c){a.attachEvent?a.attachEvent("on"+b,c):a.addEventListener(b,c)}function f(a,b,c){a.detachEvent?a.detachEvent("on"+b,c):a.removeEventListener(b,c)}function g(a,b,e,f){c(f||document,b,function(b){for(var c,k=b.target||b.srcElement;k&&!(c=d(k,a));)k=k.parentElement;c&&e.call(k,b)})}if(document.querySelector){var e={selector:0,source:0,
    minChars:3,delay:150,offsetLeft:0,offsetTop:1,cache:1,menuClass:"",renderItem:function(a,b){b=b.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&");var c=new RegExp("("+b.split(" ").join("|")+")","gi");return'<div class="dj-autocomplete-suggestion" data-val="'+a+'">'+a.replace(c,"<b>$1</b>")+"</div>"},onSelect:function(a,b,c){}},h;for(h in a)a.hasOwnProperty(h)&&(e[h]=a[h]);var l="object"==typeof e.selector?[e.selector]:document.querySelectorAll(e.selector);for(a=0;a<l.length;a++){var b=l[a];b.sc=document.createElement("div");
    b.sc.className="dj-autocomplete-suggestions "+e.menuClass;b.autocompleteAttr=b.getAttribute("autocomplete");b.setAttribute("autocomplete","off");b.cache={};b.last_val="";b.updateSC=function(a,c){var d=b.getBoundingClientRect();b.sc.style.left=Math.round(d.left+(window.pageXOffset||document.documentElement.scrollLeft)+e.offsetLeft)+"px";b.sc.style.top=Math.round(d.bottom+(window.pageYOffset||document.documentElement.scrollTop)+e.offsetTop-1)+"px";b.sc.style.width=Math.round(d.right-d.left)+"px";if(!a&&
        (b.sc.style.display="block",b.sc.maxHeight||(b.sc.maxHeight=parseInt((window.getComputedStyle?getComputedStyle(b.sc,null):b.sc.currentStyle).maxHeight)),b.sc.suggestionHeight||(b.sc.suggestionHeight=b.sc.querySelector(".dj-autocomplete-suggestion").offsetHeight),b.sc.suggestionHeight))if(c){var d=b.sc.scrollTop,f=c.getBoundingClientRect().top-b.sc.getBoundingClientRect().top;0<f+b.sc.suggestionHeight-b.sc.maxHeight?b.sc.scrollTop=f+b.sc.suggestionHeight+d-b.sc.maxHeight:0>f&&(b.sc.scrollTop=f+d)}else b.sc.scrollTop=
        0};c(window,"resize",b.updateSC);document.body.appendChild(b.sc);g("autocomplete-suggestion","mouseleave",function(a){var c=b.sc.querySelector(".dj-autocomplete-suggestion.selected");c&&setTimeout(function(){c.className=c.className.replace("selected","")},20)},b.sc);g("autocomplete-suggestion","mouseover",function(a){if(a=b.sc.querySelector(".dj-autocomplete-suggestion.selected"))a.className=a.className.replace("selected","");this.className+=" selected"},b.sc);g("autocomplete-suggestion","mousedown",
        function(a){if(d(this,"dj-autocomplete-suggestion")){var c=this.getAttribute("data-val");b.value=c;e.onSelect(a,c,this);b.sc.style.display="none"}},b.sc);b.blurHandler=function(){try{var a=document.querySelector(".dj-autocomplete-suggestions:hover")}catch(c){a=0}a?b!==document.activeElement&&setTimeout(function(){b.focus()},20):(b.last_val=b.value,b.sc.style.display="none",setTimeout(function(){b.sc.style.display="none"},350))};c(b,"blur",b.blurHandler);var m=function(a){var c=b.value;b.cache[c]=
        a;if(a.length&&c.length>=e.minChars){for(var d="",f=0;f<a.length;f++)d+=e.renderItem(a[f],c);b.sc.innerHTML=d;b.updateSC(0)}else b.sc.style.display="none"};b.keydownHandler=function(a){var c=window.event?a.keyCode:a.which;if((40==c||38==c)&&b.sc.innerHTML){var d=b.sc.querySelector(".dj-autocomplete-suggestion.selected");d?(a=40==c?d.nextSibling:d.previousSibling)?("DIV"==a.tagName&&(a=40==c?d.nextSibling.nextSibling:d.previousSibling.previousSibling),d.className=d.className.replace("selected",""),
    a&&"DIV"!==a.tagName&&(a.className+=" selected",b.value=a.getAttribute("data-val"))):(d.className=d.className.replace("selected",""),b.value=b.last_val,a=0):(a=40==c?b.sc.querySelector(".dj-autocomplete-suggestion"):b.sc.childNodes[b.sc.childNodes.length-1],a.className+=" selected",b.value=a.getAttribute("data-val"));b.updateSC(0,a);return!1}27==c?(b.value=b.last_val,b.sc.style.display="none"):(13==c||9==c)&&(d=b.sc.querySelector(".dj-autocomplete-suggestion.selected"))&&"none"!=b.sc.style.display&&
    (e.onSelect(a,d.getAttribute("data-val"),d),setTimeout(function(){b.sc.style.display="none"},20))};c(b,"keydown",b.keydownHandler);b.keyupHandler=function(a){a=window.event?a.keyCode:a.which;if(!a||(35>a||40<a)&&13!=a&&27!=a){var c=b.value;if(c.length>=e.minChars){if(c!=b.last_val){b.last_val=c;clearTimeout(b.timer);if(e.cache){if(c in b.cache){m(b.cache[c]);return}for(a=1;a<c.length-e.minChars;a++){var d=c.slice(0,c.length-a);if(d in b.cache&&!b.cache[d].length){m([]);return}}}b.timer=setTimeout(function(){e.source(c,
        m)},e.delay)}}else b.last_val=c,b.sc.style.display="none"}};c(b,"keyup",b.keyupHandler);b.focusHandler=function(a){b.last_val="\n";b.keyupHandler(a)};e.minChars||c(b,"focus",b.focusHandler)}this.destroy=function(){for(var a=0;a<l.length;a++){var b=l[a];f(window,"resize",b.updateSC);f(b,"blur",b.blurHandler);f(b,"focus",b.focusHandler);f(b,"keydown",b.keydownHandler);f(b,"keyup",b.keyupHandler);b.autocompleteAttr?b.setAttribute("autocomplete",b.autocompleteAttr):b.removeAttribute("autocomplete");document.body.removeChild(b.sc)}}}}}();
(function(){"function"===typeof define&&define.amd?define("autoComplete",function(){return autoComplete}):"undefined"!==typeof module&&module.exports?module.exports=autoComplete:window.autoComplete=autoComplete})();window.readyHandlers=[];window.ready=function(a){window.readyHandlers.push(a);handleState()};window.handleState=function(){if(-1<["interactive","complete"].indexOf(document.readyState))for(;0<window.readyHandlers.length;)window.readyHandlers.shift()()};document.onreadystatechange=window.handleState;
ready(function(){new autoComplete({selector:'input[name="q"]',minChars:2,renderItem:function(a){var d="",c=a.br?a.br+" ":"";0==a.ty?(c=a.ca?' <span class="dj-sep">em</span> '+a.ca:"",c=a.br?a.br+' <span class="dj-sep">em</span> '+a.ti:a.ti+c):780<(window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth)?(d=" product",c=(a.th?'<img class="dj-item-img" src="'+suggesterImgUrl+"/m_"+a.th+'">':"")+'<span class="dj-item-product"><strong class="dj-item-brand">'+c+'</strong><span class="dj-item-title">'+
    a.ti+'</span><strong class="dj-item-price">R$ '+a.cp+"</strong></span>"):c=a.ti;c='<a class="dj-autocomplete-suggestion'+d+'" data-link="'+a.li+'" href="//'+a.li+'">'+c+"</a>";a.ct&&(c='<div class="dj-autocomplete-category">'+a.ct+"</div>"+c);return c},onSelect:function(a,d,c){window.location.href=window.location.protocol+"//"+c.getAttribute("data-link")},source:function(a,d){var c=[],f=[];suggester.get(a,function(a){for(var e=0;e<a.length;e++)switch(a[e].ty){case 0:0==c.length&&(a[e].ct="Sugest\u00f5es de busca");
    5>c.length&&c.push(a[e]);break;case 1:0==f.length&&(a[e].ct="Produtos relacionados"),4>f.length&&f.push(a[e])}d(c.concat(f))})}})});
