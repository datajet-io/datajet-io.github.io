var escapeRegEx=function(){return{escapeRegExChars:function(a){return a.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},isNumber:function(a){return"number"===typeof a},isUndefined:function(a){return"undefined"===typeof a},noop:function(){}}}();var Datajet=Datajet||{};Datajet._hostOverride=null;Datajet._suggestUrl="/1.1/suggest/%QUERY";Datajet._getUrl=function(a,e,c,d,g){var f="https:"!=window.location.protocol?"http":"https";d||(d=50);g||(g="products");return f+"://$host$ep?key=".replace("$host",a).replace("$ep",e)+c+"&size="+d+"&context="+g};Datajet.euw=function(a,e,c){return new Datajet.Seer("euw",a,e,c)};Datajet.usw=function(a,e,c){return new Datajet.Seer("usw",a,e,c)};
Datajet.apse=function(a,e,c){return new Datajet.Seer("apse",a,e,c)};Datajet.sae=function(a,e,c){return new Datajet.Seer("sae",a,e,c)};Datajet.Seer=function(a,e,c,d){a="seer$region$datajet.io".replace("$region$",""!==a?"."+a+".":".");a=null==Datajet._hostOverride?a:Datajet._hostOverride;this.seerUrl=Datajet._getUrl(a,Datajet._suggestUrl,e,c,d);this.ttl=6E5;this._requestor=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP")};
Datajet.Seer.prototype.ajaxError=function(a){console.log("Datajet ERROR XMLHttpRequest status: "+a.status)};Datajet.Seer.prototype._ajax=function(a,e){var c=this;this._requestor.onreadystatechange=function(){4==c._requestor.readyState&&(200==c._requestor.status?e(JSON.parse(c._requestor.responseText)):c.ajaxError(c._requestor))};this._requestor.open("GET",a,!0);this._requestor.withCredentials=!0;this._requestor.send()};
Datajet.Seer.prototype.get=function(a,e){""==a?e([]):this._ajax(this.seerUrl.replace("%QUERY",a),function(a){null===a&&(a=[]);e(a)})};var css=".dj-autocomplete-suggestions{position:absolute;font-family:Arial,Helvetica,sans-serif;overflow:hidden;font-size:12px;background-color:#fff;z-index:99000;display:block!important}.dj-autocomplete-suggestion{padding:6px 10px 4px;display:block;color:#4C4C4C;text-decoration:none}.dj-autocomplete-category{display:block;background:#ececec;padding:6px 10px 4px;text-transform:uppercase;font-weight:700}@media (max-width:780px){.dj-autocomplete-suggestion{padding:8px 10px 8px 20px!important}.dj-autocomplete-suggestions{width:100%!important;left:0!important;font-size:16px!important;line-height:21px!important}.dj-autocomplete-category{background:#F5F5F5;padding:6px 10px 6px 12px;color:#8A8A8A;text-transform:none;font-weight:400;margin:4px 0}.dj-autocomplete-category:first-child{margin-top:0}}.dj-autocomplete-suggestion.selected,.dj-autocomplete-suggestion:hover{background-color:#f5f5f5}.dj-autocomplete-suggestion.product{width:25%;float:left;text-align:center;padding:0 4px;box-sizing:border-box;height:170px;line-height:14px}.dj-item-img{max-width:80px;margin:5px 0}.dj-item-brand,.dj-item-price{display:block}.dj-item-title{display:block;height:30px;overflow:hidden}.dj-sep{color:gray}",
head=document.getElementsByTagName("head")[0];head.innerHTML=head.innerHTML+"<style>"+css+"</style>";
var autoComplete=function(){return function(a){function e(b,a){return b.classList?b.classList.contains(a):(new RegExp("\\b"+a+"\\b")).test(b.className)}function c(b,a,k){b.attachEvent?b.attachEvent("on"+a,k):b.addEventListener(a,k)}function d(b,a,k){b.detachEvent?b.detachEvent("on"+a,k):b.removeEventListener(a,k)}function g(b,a,k,d){c(d||document,a,function(a){for(var l,c=a.target||a.srcElement;c&&!(l=e(c,b));)c=c.parentElement;l&&k.call(c,a)})}if(document.querySelector){var f={selector:0,source:0,
minChars:3,delay:100,offsetLeft:0,offsetTop:1,cache:0,menuClass:"",renderItem:function(b,a){a=a.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&");var c=new RegExp("("+a.split(" ").join("|")+")","gi");return'<div class="dj-autocomplete-suggestion" data-val="'+b+'">'+b.replace(c,"<b>$1</b>")+"</div>"},onSelect:function(b,a,c){}},h;for(h in a)a.hasOwnProperty(h)&&(f[h]=a[h]);var m="object"==typeof f.selector?[f.selector]:document.querySelectorAll(f.selector);for(a=0;a<m.length;a++){var b=m[a];b.sc=document.createElement("div");
b.sc.className="dj-autocomplete-suggestions "+f.menuClass;b.autocompleteAttr=b.getAttribute("autocomplete");b.setAttribute("autocomplete","off");b.cache={};b.last_val="";b.updateSC=function(a,l){var c=b.getBoundingClientRect();b.sc.style.left=Math.round(c.left+(window.pageXOffset||document.documentElement.scrollLeft)+f.offsetLeft)+"px";b.sc.style.top=Math.round(c.bottom+(window.pageYOffset||document.documentElement.scrollTop)+f.offsetTop-1)+"px";b.sc.style.width=Math.round(c.right-c.left)+"px";if(!a&&
(b.sc.style.display="block",b.sc.maxHeight||(b.sc.maxHeight=parseInt((window.getComputedStyle?getComputedStyle(b.sc,null):b.sc.currentStyle).maxHeight)),b.sc.suggestionHeight||(b.sc.suggestionHeight=b.sc.querySelector(".dj-autocomplete-suggestion").offsetHeight),b.sc.suggestionHeight))if(l){var c=b.sc.scrollTop,d=l.getBoundingClientRect().top-b.sc.getBoundingClientRect().top;0<d+b.sc.suggestionHeight-b.sc.maxHeight?b.sc.scrollTop=d+b.sc.suggestionHeight+c-b.sc.maxHeight:0>d&&(b.sc.scrollTop=d+c)}else b.sc.scrollTop=
0};c(window,"resize",b.updateSC);document.body.appendChild(b.sc);g("autocomplete-suggestion","mouseleave",function(a){var c=b.sc.querySelector(".dj-autocomplete-suggestion.selected");c&&setTimeout(function(){c.className=c.className.replace("selected","")},20)},b.sc);g("autocomplete-suggestion","mouseover",function(a){if(a=b.sc.querySelector(".dj-autocomplete-suggestion.selected"))a.className=a.className.replace("selected","");this.className+=" selected"},b.sc);g("autocomplete-suggestion","mousedown",
function(a){if(e(this,"dj-autocomplete-suggestion")){var c=this.getAttribute("data-val");b.value=c;f.onSelect(a,c,this);b.sc.style.display="none"}},b.sc);b.blurHandler=function(){try{var a=document.querySelector(".dj-autocomplete-suggestions:hover")}catch(c){a=0}a?b!==document.activeElement&&setTimeout(function(){b.focus()},20):(b.last_val=b.value,b.sc.style.display="none",setTimeout(function(){b.sc.style.display="none"},350))};c(b,"blur",b.blurHandler);var n=function(a){var c=b.value;b.cache[c]=
a;if(a.length&&c.length>=f.minChars){for(var d="",e=0;e<a.length;e++)d+=f.renderItem(a[e],c);b.sc.innerHTML=d;b.updateSC(0)}else b.sc.style.display="none"};b.keydownHandler=function(a){var c=window.event?a.keyCode:a.which;if((40==c||38==c)&&b.sc.innerHTML){var d=b.sc.querySelector(".dj-autocomplete-suggestion.selected");d?(a=40==c?d.nextSibling:d.previousSibling)?("DIV"==a.tagName&&(a=40==c?d.nextSibling.nextSibling:d.previousSibling.previousSibling),d.className=d.className.replace("selected",""),
a&&"DIV"!==a.tagName&&(a.className+=" selected",b.value=a.getAttribute("data-val"))):(d.className=d.className.replace("selected",""),b.value=b.last_val,a=0):(a=40==c?b.sc.querySelector(".dj-autocomplete-suggestion"):b.sc.childNodes[b.sc.childNodes.length-1],a.className+=" selected",b.value=a.getAttribute("data-val"));b.updateSC(0,a);return!1}27==c?(b.value=b.last_val,b.sc.style.display="none"):(13==c||9==c)&&(d=b.sc.querySelector(".dj-autocomplete-suggestion.selected"))&&"none"!=b.sc.style.display&&
(f.onSelect(a,d.getAttribute("data-val"),d),setTimeout(function(){b.sc.style.display="none"},20))};c(b,"keydown",b.keydownHandler);b.keyupHandler=function(a){a=window.event?a.keyCode:a.which;if(!a||(35>a||40<a)&&13!=a&&27!=a){var c=b.value;if(c.length>=f.minChars){if(c!=b.last_val){b.last_val=c;clearTimeout(b.timer);if(f.cache){if(c in b.cache){n(b.cache[c]);return}for(a=1;a<c.length-f.minChars;a++){var d=c.slice(0,c.length-a);if(d in b.cache&&!b.cache[d].length){n([]);return}}}b.timer=setTimeout(function(){f.source(c,
n)},f.delay)}}else b.last_val=c,b.sc.style.display="none"}};c(b,"keyup",b.keyupHandler);b.focusHandler=function(a){b.last_val="\n";b.keyupHandler(a)};f.minChars||c(b,"focus",b.focusHandler)}this.destroy=function(){for(var a=0;a<m.length;a++){var b=m[a];d(window,"resize",b.updateSC);d(b,"blur",b.blurHandler);d(b,"focus",b.focusHandler);d(b,"keydown",b.keydownHandler);d(b,"keyup",b.keyupHandler);b.autocompleteAttr?b.setAttribute("autocomplete",b.autocompleteAttr):b.removeAttribute("autocomplete");document.body.removeChild(b.sc)}}}}}();
(function(){"function"===typeof define&&define.amd?define("autoComplete",function(){return autoComplete}):"undefined"!==typeof module&&module.exports?module.exports=autoComplete:window.autoComplete=autoComplete})();window.readyHandlers=[];window.ready=function(a){window.readyHandlers.push(a);handleState()};window.handleState=function(){if(-1<["interactive","complete"].indexOf(document.readyState))for(;0<window.readyHandlers.length;)window.readyHandlers.shift()()};document.onreadystatechange=window.handleState;
ready(function(){new autoComplete({selector:'input[name="q"]',minChars:2,cache:0,isMobile:function(){return 780<(window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth)},renderItem:function(a){var e="",c=a.br?a.br+" ":"";if(0==a.ty)var d=a.br?a.br+' <span class="dj-sep">em</span> '+(a.ti?a.ti:a.ca):a.ti+(a.ca?' <span class="dj-sep">em</span> '+a.ca:"");else 1==a.ty?this.isMobile()?(e=" product",d=(a.th?'<img class="dj-item-img" src="'+suggesterImgUrl+"/m_"+a.th+'">':"")+
'<span class="dj-item-product"><strong class="dj-item-brand">'+c+'</strong><span class="dj-item-title">'+a.ti+'</span><strong class="dj-item-price">$'+a.cp+"</strong></span>"):d=a.ti:2==a.ty&&(d=a.br?a.br+' <span class="dj-sep">em</span> '+(a.ti?a.ti:a.ca):a.ti+(a.ca?' <span class="dj-sep">em</span> '+a.ca:""));d='<a class="dj-autocomplete-suggestion'+e+'" data-link="'+a.li+'" href="//'+a.li+'">'+d+"</a>";a.ct&&(d='<div class="dj-autocomplete-category">'+a.ct+"</div>"+d);return d},onSelect:function(a,
e,c){c.getAttribute("data-link")&&(window.location.href=window.location.protocol+"//"+c.getAttribute("data-link"))},source:function(a,e){var c=[],d=[],g=[],f=this,h=f.isMobile()?15:20;Datajet.usw(window.FEED_KEY,h,"search").get(a,function(a){for(var b=0;b<a.length;b++)0==g.length&&(a[b].ct="Search Results"),g.length<(f.isMobile()?5:3)&&g.push(a[b]);e(g.concat(c).concat(d))});Datajet.usw(window.FEED_KEY,h,"category").get(a,function(a){for(var b=0;b<a.length;b++)0==c.length&&(a[b].ct="Category Suggestions"),
c.length<(f.isMobile()?5:3)&&c.push(a[b]);e(g.concat(c).concat(d))});Datajet.usw(window.FEED_KEY,h,"product").get(a,function(a){for(var b=0;b<a.length;b++)0==d.length&&(a[b].ct="Products"),d.length<(f.isMobile()?4:3)&&d.push(a[b]);e(g.concat(c).concat(d))})}})});
